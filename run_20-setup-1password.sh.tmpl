#!/usr/bin/env bash

# Setup 1Password CLI

{{- if eq .chezmoi.os "darwin" }}
{{- $opExists := lookPath "op" }}
{{- if not $opExists }}
# 1Password CLI not found - skip setup
exit 0
{{- else }}

set -euo pipefail

# Check if any accounts are configured
if op account list 2>&1 | grep -q "No accounts configured"; then
  echo "‚ùå No 1Password accounts configured"
  echo ""
  echo "Action needed:"
  echo "  op account add --address YOUR_SUBDOMAIN.1password.com --email YOUR_EMAIL"
  echo ""
  exit 1
fi
{{- end }}
{{- end }}


#!/usr/bin/env bash

# Setup 1Password CLI

{{ if eq .chezmoi.os "darwin" }}
set -euo pipefail

# Check if 1Password CLI is installed
if ! command -v op &> /dev/null; then
  echo "⏭️  1Password CLI not found - skipping setup"
  exit 0
fi

# Check if any accounts are configured
if op account list 2>&1 | grep -q "No accounts configured"; then
  echo "❌ No 1Password accounts configured"
  echo ""
  echo "Action needed:"
  echo "  op account add --address YOUR_SUBDOMAIN.1password.com --email YOUR_EMAIL"
  echo ""
  exit 1
fi
{{ end }}
